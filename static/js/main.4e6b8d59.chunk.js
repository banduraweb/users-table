(this["webpackJsonpusers-table"]=this["webpackJsonpusers-table"]||[]).push([[0],{40:function(e,a,t){e.exports=t(54)},50:function(e,a,t){},54:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(15),s=t.n(r),c=t(16),o=t(8),u=t(12),i=t.n(u),m=t(5),E=t(31),d=t(58),N=t(59),b=t(32),f=t.n(b),p=(t(49),t(50),t(60)),A=t(61),O=t(62),g=t(38),h=function(e){var a=e.dbInfo;return console.log(a),console.log(a),l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{bg:"dark",variant:"dark",id:"header__navbar"},l.a.createElement(p.a.Brand,{href:"#home"},"INDEXEDDB API"),l.a.createElement(A.a,{className:"mr-auto"},l.a.createElement(A.a.Link,{href:"#home"},"indexedDB: ",a&&a.name?"CONNECTED":"CONNECTING..."," "),l.a.createElement(A.a.Link,{href:"#features"},"Version: ",a&&a.verno)),l.a.createElement(O.a,{inline:!0},l.a.createElement(g.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}))))},v=t(39),S=t(56),j={FIRST_NAME:"First Name",LAST_NAME:"Last Name",PHONE:"Phone +38",GENDER:"Gender",AGE:"Age",_id:""},_={isValidFirstName:null,isValidLastName:null,isValidPhone:null,isValidGender:null,isValidAge:null},L=function(e){var a=e.getUsersInfo,t=e.onSubmitUsersData,r=e.userState,s=e.getValidationReport,c=e.isSubmit,u=Object(n.useState)(_),i=Object(o.a)(u,2),E=i[0],d=i[1];console.log(c);var N=r.FIRST_NAME,b=r.LAST_NAME,f=r.PHONE,p=r.GENDER,A=r.AGE,g=function(e){var a=e.target,t=a.value,n="";switch(a.name){case"FIRST_NAME":(n=t.toLowerCase().replace(/[a-z]/g,"").length)>0||0===t.length?d(Object(m.a)({},E,{isValidFirstName:!1})):d(Object(m.a)({},E,{isValidFirstName:!0}));break;case"LAST_NAME":(n=t.toLowerCase().replace(/[a-z]/g,"").length)>0||0===t.length?d(Object(m.a)({},E,{isValidLastName:!1})):d(Object(m.a)({},E,{isValidLastName:!0}));break;case"PHONE":0!==(n=t.toLowerCase().replace(/[0-9]/g,"").length)||0===n&&t.length>10||0===n&&t.length<5?d(Object(m.a)({},E,{isValidPhone:!1})):d(Object(m.a)({},E,{isValidPhone:!0}));break;case"GENDER":d("0"!==t?Object(m.a)({},E,{isValidGender:!0}):Object(m.a)({},E,{isValidGender:!1}));break;case"AGE":d(+t<1||+t>100?Object(m.a)({},E,{isValidAge:!1}):Object(m.a)({},E,{isValidAge:!0}))}return E},h=E.isValidFirstName,L=E.isValidAge,D=E.isValidGender,C=E.isValidLastName,R=E.isValidPhone;return l.a.createElement(O.a,{onSubmit:t,className:"w-75 p-3 mx-auto form_custom",border:"primary"},l.a.createElement(O.a.Row,null,l.a.createElement(O.a.Group,{as:v.a},l.a.createElement(O.a.Label,null,j.FIRST_NAME),l.a.createElement(O.a.Control,{className:null===h?null:h?"success":"warning",onBlur:g,onChange:a,name:"FIRST_NAME",value:N,type:"text",placeholder:"".concat(j.FIRST_NAME.toLowerCase())}),l.a.createElement(O.a.Text,{className:"text-muted"})),l.a.createElement(O.a.Group,{as:v.a},l.a.createElement(O.a.Label,null,j.LAST_NAME),l.a.createElement(O.a.Control,{className:null===C?null:C?"success":"warning",onBlur:g,onChange:a,value:b,name:"LAST_NAME",type:"text",placeholder:"".concat(j.LAST_NAME.toLowerCase())}),l.a.createElement(O.a.Text,{className:"text-muted"}))),l.a.createElement(O.a.Row,null,l.a.createElement(O.a.Group,{as:v.a},l.a.createElement(O.a.Label,null,j.GENDER),l.a.createElement(O.a.Control,{className:null===D?null:D?"success":"warning",value:p,onChange:function(e){a(e),g(e)},as:"select",name:"GENDER"},l.a.createElement("option",{value:0},"Choose"),l.a.createElement("option",{value:"male"},"male"),l.a.createElement("option",{value:"female"},"female"))),l.a.createElement(O.a.Group,{as:v.a},l.a.createElement(O.a.Label,null,j.AGE),l.a.createElement(O.a.Control,{className:null===L?null:L?"success":"warning",onChange:function(e){a(e),g(e)},type:"number",name:"AGE",value:A,placeholder:"".concat(j.AGE.toLowerCase()),min:1,max:100}),l.a.createElement(O.a.Text,{className:"text-muted"}))),l.a.createElement(v.a,{sm:4,className:"m-sm-auto"},l.a.createElement(O.a.Group,null,l.a.createElement(O.a.Label,null,j.PHONE.replace(/[^a-zA-Z]/g,"")),l.a.createElement(O.a.Control,{className:null===R?null:R?"success":"warning",onChange:a,onBlur:g,value:f,name:"PHONE",type:"text",placeholder:"".concat(j.PHONE.toLowerCase().replace(/phone/,""))}),l.a.createElement(O.a.Text,{className:"text-muted"}))),l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{onClick:function(){s(E),Object.values(E).every(Boolean)&&d(_)},variant:"primary",type:"submit"},"Submit"),null===c?null:!c&&l.a.createElement("span",{className:"alert alert-primary",role:"alert"},"You should fill the form before submit")))},D=t(14),C=t(57),R=function(e){var a=e.userDataBase,t=Object(n.useState)({isClicked:!1,users:[]}),r=Object(o.a)(t,2),s=r[0],c=r[1],u=a.ALL_USERS;Object(n.useEffect)((function(){c(Object(m.a)({},s,{users:u}))}),[u]);var i=s.users,E=s.isClicked;return l.a.createElement(C.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",responsive:"sm",id:"table",className:"table-custom table-responsive"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),Object.keys(j).map((function(e){return l.a.createElement("th",{key:e},e.replace(/_/g," "),"\u2003",l.a.createElement(S.a,{className:"btn_search",onClick:function(){return function(e){switch(console.log(u[0]),!isNaN(+u[0][e])){case!0:c(E?{isClicked:!E,users:Object(D.a)(u).sort((function(a,t){return+a[e]-+t[e]}))}:{isClicked:!E,users:Object(D.a)(u).sort((function(a,t){return+t[e]-+a[e]}))});break;case!1:c(E?{isClicked:!E,users:Object(D.a)(u).sort((function(a,t){return a[e].localeCompare(t[e])}))}:{isClicked:!E,users:Object(D.a)(u).sort((function(a,t){return t[e].localeCompare(a[e])}))});break;default:c(Object(m.a)({},s,{users:u}))}}(e)},variant:"outline-info"},"Sort ",l.a.createElement("i",{className:"fas fa-sort"})))})))),l.a.createElement("tbody",null,i.map((function(e,a){var t=e._id,n=e.FIRST_NAME,r=e.LAST_NAME,s=e.PHONE,c=e.GENDER,o=e.AGE;return l.a.createElement("tr",{key:t},l.a.createElement("td",null,++a),l.a.createElement("td",null,n),l.a.createElement("td",null,r),l.a.createElement("td",null,s),l.a.createElement("td",null,c),l.a.createElement("td",null,o),l.a.createElement("td",null,t))}))))},G={FIRST_NAME:"",LAST_NAME:"",PHONE:"",GENDER:"",AGE:""},T={ALL_USERS:[],DB_READY_INFO:{}};var y=function(){Object(n.useEffect)((function(){!function(){var e,a;i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(C.on("ready",(function(){return C})));case 2:return e=t.sent,t.next=5,i.a.awrap(C.userDataBase.toArray());case 5:a=t.sent,setTimeout((function(){p(Object(m.a)({},b,{ALL_USERS:a,DB_READY_INFO:e}))}),1500);case 7:case"end":return t.stop()}}))}()}),[]);var e=Object(n.useState)(G),a=Object(o.a)(e,2),t=a[0],r=a[1],s=Object(n.useState)(T),u=Object(o.a)(s,2),b=u[0],p=u[1],A=Object(n.useState)(null),O=Object(o.a)(A,2),g=O[0],v=O[1],S=Object(n.useState)(null),j=Object(o.a)(S,2),_=j[0],D=j[1],C=new E.a("ReactDexie");C.version(1).stores({userDataBase:"_id, firstName, lastName, phone, gender, age"}),C.version(1).stores({userDataBase:"++id,someIndex"}),C.on("ready",(function(){return C.userDataBase.count((function(e){e>0?setTimeout((function(){v(!1),console.log("Already populated")}),1500):setTimeout((function(){v(!0),console.log("Database is empty")}),1500)}))})),C.open().catch((function(e){console.log(e.stack||e)}));var y={},w=b.ALL_USERS,k=b.DB_READY_INFO;return l.a.createElement(d.a,null,l.a.createElement(h,{dbInfo:k}),l.a.createElement(L,{getUsersInfo:function(e){r(Object(m.a)({},t,Object(c.a)({},e.target.name,e.target.value)))},onSubmitUsersData:function(e){e.preventDefault();var a=!Object.values(t).some((function(e){return""===e})),n=Object.values(y).every(Boolean);if(a&&n){var l=t.FIRST_NAME,s=t.LAST_NAME,c=t.PHONE,o=t.GENDER,u=t.AGE,E={_id:f()(),FIRST_NAME:l,LAST_NAME:s,PHONE:c,GENDER:o,AGE:u};C.userDataBase.add(E).then((function(){var e;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(C.userDataBase.toArray());case 2:e=a.sent,p(Object(m.a)({},b,{ALL_USERS:e}));case 4:case"end":return a.stop()}}))})),r(G),D(!0)}else D(!1)},userState:t,getValidationReport:function(e){y=e},isSubmit:_}),l.a.createElement(l.a.Fragment,null,g?l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement("span",null,"Database is empty...")):w.length>0?l.a.createElement(R,{userDataBase:b}):l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement(N.a,{animation:"grow",variant:"primary"}))))};s.a.render(l.a.createElement(y,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4e6b8d59.chunk.js.map