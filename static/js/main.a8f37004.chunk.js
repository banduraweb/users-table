(this["webpackJsonpusers-table"]=this["webpackJsonpusers-table"]||[]).push([[0],{47:function(e,a,t){e.exports=t(61)},57:function(e,a,t){},61:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(15),c=t.n(r),s=t(26),o=t(11),u=t(20),i=t.n(u),m=t(6),E=t(39),d=t(65),N=t(66),f=t(40),b=t.n(f),p=(t(56),t(57),t(70)),A=t(69),O=t(68),g=t(44),v=function(e){var a=e.dbInfo;return console.log(a),console.log(a),l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{bg:"dark",variant:"dark",id:"header__navbar"},l.a.createElement(p.a.Brand,{href:"#home"},"INDEXEDDB API"),l.a.createElement(A.a,{className:"mr-auto"},l.a.createElement(A.a.Link,{href:"#home"},"indexedDB: ",a&&a.name?"CONNECTED":"CONNECTING..."," "),l.a.createElement(A.a.Link,{href:"#features"},"Version: ",a&&a.verno)),l.a.createElement(O.a,{inline:!0},l.a.createElement(g.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}))))},S=t(45),L=t(63),h={FIRST_NAME:"First Name",LAST_NAME:"Last Name",PHONE:"Phone +38",GENDER:"Gender",AGE:"Age",_id:""},C={isValidFirstName:null,isValidLastName:null,isValidPhone:null,isValidGender:null,isValidAge:null},D=function(e){var a=e.getUsersInfo,t=e.onSubmitUsersData,r=e.userState,c=e.getValidationReport,s=e.isSubmit,u=Object(n.useState)(C),i=Object(o.a)(u,2),E=i[0],d=i[1];console.log(s);var N=r.FIRST_NAME,f=r.LAST_NAME,b=r.PHONE,p=r.GENDER,A=r.AGE,g=function(e){var a=e.target,t=a.value,n="";switch(a.name){case"FIRST_NAME":(n=t.toLowerCase().replace(/[a-z]/g,"").length)>0||0===t.length?d(Object(m.a)({},E,{isValidFirstName:!1})):d(Object(m.a)({},E,{isValidFirstName:!0}));break;case"LAST_NAME":(n=t.toLowerCase().replace(/[a-z]/g,"").length)>0||0===t.length?d(Object(m.a)({},E,{isValidLastName:!1})):d(Object(m.a)({},E,{isValidLastName:!0}));break;case"PHONE":0!==(n=t.toLowerCase().replace(/[0-9]/g,"").length)||0===n&&t.length>10||0===n&&t.length<5?d(Object(m.a)({},E,{isValidPhone:!1})):d(Object(m.a)({},E,{isValidPhone:!0}));break;case"GENDER":d("0"!==t?Object(m.a)({},E,{isValidGender:!0}):Object(m.a)({},E,{isValidGender:!1}));break;case"AGE":d(+t<1||+t>100?Object(m.a)({},E,{isValidAge:!1}):Object(m.a)({},E,{isValidAge:!0}))}return E},v=E.isValidFirstName,D=E.isValidAge,j=E.isValidGender,_=E.isValidLastName,R=E.isValidPhone;return l.a.createElement(O.a,{onSubmit:t,className:"w-75 p-3 mx-auto form_custom",border:"primary"},l.a.createElement(O.a.Row,null,l.a.createElement(O.a.Group,{as:S.a},l.a.createElement(O.a.Label,null,h.FIRST_NAME),l.a.createElement(O.a.Control,{className:null===v?null:v?"success":"warning",onBlur:g,onChange:a,name:"FIRST_NAME",value:N,type:"text",placeholder:"".concat(h.FIRST_NAME.toLowerCase())}),l.a.createElement(O.a.Text,{className:"text-muted"})),l.a.createElement(O.a.Group,{as:S.a},l.a.createElement(O.a.Label,null,h.LAST_NAME),l.a.createElement(O.a.Control,{className:null===_?null:_?"success":"warning",onBlur:g,onChange:a,value:f,name:"LAST_NAME",type:"text",placeholder:"".concat(h.LAST_NAME.toLowerCase())}),l.a.createElement(O.a.Text,{className:"text-muted"}))),l.a.createElement(O.a.Row,null,l.a.createElement(O.a.Group,{as:S.a},l.a.createElement(O.a.Label,null,h.GENDER),l.a.createElement(O.a.Control,{className:null===j?null:j?"success":"warning",value:p,onChange:function(e){a(e),g(e)},as:"select",name:"GENDER"},l.a.createElement("option",{value:0},"Choose"),l.a.createElement("option",{value:"male"},"male"),l.a.createElement("option",{value:"female"},"female"))),l.a.createElement(O.a.Group,{as:S.a},l.a.createElement(O.a.Label,null,h.AGE),l.a.createElement(O.a.Control,{className:null===D?null:D?"success":"warning",onChange:function(e){a(e),g(e)},type:"number",name:"AGE",value:A,placeholder:"".concat(h.AGE.toLowerCase()),min:1,max:100}),l.a.createElement(O.a.Text,{className:"text-muted"}))),l.a.createElement(S.a,{sm:4,className:"m-sm-auto"},l.a.createElement(O.a.Group,null,l.a.createElement(O.a.Label,null,h.PHONE.replace(/[^a-zA-Z]/g,"")),l.a.createElement(O.a.Control,{className:null===R?null:R?"success":"warning",onChange:a,onBlur:g,value:b,name:"PHONE",type:"text",placeholder:"".concat(h.PHONE.toLowerCase().replace(/phone/,""))}),l.a.createElement(O.a.Text,{className:"text-muted"}))),l.a.createElement(l.a.Fragment,null,l.a.createElement(L.a,{onClick:function(){c(E),Object.values(E).every(Boolean)&&d(C)},variant:"primary",type:"submit"},"Submit"),null===s?null:!s&&l.a.createElement("span",{className:"alert alert-primary",role:"alert"},"You should fill the form before submit")))},j=t(24),_=t(64),R=t(67),T=function(e){var a=e.userData,t=e.getConfirmDeleteUser,r=Object(n.useState)({CANCEL:"",DELETE:""}),c=Object(o.a)(r,2),s=c[0],u=c[1],i=s.CANCEL,m=s.DELETE,E=a.firstName,d=a.lastName,N=a.id;return t(i,m,N),l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a.Dialog,{className:"fixed-top"},l.a.createElement(R.a.Header,null,l.a.createElement(R.a.Title,null,"Please confirm deleting user from IndexedDB")),l.a.createElement(R.a.Body,null,l.a.createElement("p",null,"NAME: ",E," ",d),l.a.createElement("p",null,"ID: ",N)),l.a.createElement(R.a.Footer,null,l.a.createElement(L.a,{onClick:function(){u({CANCEL:"CANCEL"})},variant:"secondary"},"Cancel"),l.a.createElement(L.a,{onClick:function(){u({DELETE:"DELETE"})},variant:"primary"},"Delete"))))},y=function(e){var a=e.userDataBase,t=e.deleteUser,r=Object(n.useState)({selected:!1,id:null,firstName:null,lastName:null}),c=Object(o.a)(r,2),s=c[0],u=c[1],i=Object(n.useState)({isClicked:!1,users:[]}),E=Object(o.a)(i,2),d=E[0],N=E[1],f=a.ALL_USERS;Object(n.useEffect)((function(){N(Object(m.a)({},d,{users:f}))}),[f]);var b=d.users,p=d.isClicked,A=s.selected;return l.a.createElement(l.a.Fragment,null,l.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",responsive:"sm",id:"table",className:"table-custom table-responsive"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),Object.keys(h).map((function(e){return l.a.createElement("th",{key:e},e.replace(/_/g," "),"\u2003",l.a.createElement(L.a,{className:"btn_search",onClick:function(){return function(e){switch(console.log("isClicked"),!isNaN(+f[0][e])){case!0:N(p?{isClicked:!p,users:Object(j.a)(f).sort((function(a,t){return+a[e]-+t[e]}))}:{isClicked:!p,users:Object(j.a)(f).sort((function(a,t){return+t[e]-+a[e]}))});break;case!1:N(p?{isClicked:!p,users:Object(j.a)(f).sort((function(a,t){return t[e].localeCompare(a[e])}))}:{isClicked:!p,users:Object(j.a)(f).sort((function(a,t){return a[e].localeCompare(t[e])}))});break;default:N(Object(m.a)({},d,{users:f}))}}(e)},variant:"outline-info"},"Sort ",l.a.createElement("i",{className:"fas fa-sort"})))})))),l.a.createElement("tbody",null,b.map((function(e,a){var t=e._id,n=e.FIRST_NAME,r=e.LAST_NAME,c=e.PHONE,o=e.GENDER,i=e.AGE;return l.a.createElement("tr",{key:t},l.a.createElement("td",null,++a),l.a.createElement("td",null,n),l.a.createElement("td",null,r),l.a.createElement("td",null,c),l.a.createElement("td",null,o),l.a.createElement("td",null,i),l.a.createElement("td",null,t,l.a.createElement(L.a,{onClick:function(){return e=t,a=n,l=r,void u(Object(m.a)({},s,{selected:!0,id:e,firstName:a,lastName:l}));var e,a,l},variant:"info"},"delete user")))})))),A&&l.a.createElement(T,{userData:s,getConfirmDeleteUser:function(e,a,n){e?u({selected:!1,id:null,firstName:null,lastName:null}):a&&(t(n),u({selected:!1,id:null,firstName:null,lastName:null}))}}))},G={FIRST_NAME:"",LAST_NAME:"",PHONE:"",GENDER:"",AGE:""},k={ALL_USERS:[],DB_READY_INFO:{}};var w=function(){Object(n.useEffect)((function(){!function(){var e,a;i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(_.on("ready",(function(){return _})));case 2:return e=t.sent,t.next=5,i.a.awrap(_.userDataBase.toArray());case 5:a=t.sent,setTimeout((function(){p(Object(m.a)({},f,{ALL_USERS:a,DB_READY_INFO:e}))}),1500);case 7:case"end":return t.stop()}}))}()}),[]);var e=Object(n.useState)(G),a=Object(o.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(k),u=Object(o.a)(c,2),f=u[0],p=u[1],A=Object(n.useState)(null),O=Object(o.a)(A,2),g=O[0],S=O[1],L=Object(n.useState)(null),h=Object(o.a)(L,2),C=h[0],j=h[1],_=new E.a("ReactDexie");_.version(1).stores({userDataBase:"_id, firstName, lastName, phone, gender, age"}),_.on("ready",(function(){return _.userDataBase.count((function(e){e>0?setTimeout((function(){S(!1),console.log("Already populated")}),1500):setTimeout((function(){S(!0),console.log("Database is empty")}),1500)}))})),_.open().catch((function(e){console.log(e.stack||e)}));var R={},T=f.ALL_USERS,w=f.DB_READY_INFO;return console.log(T,"ALL_USERS"),l.a.createElement(d.a,null,l.a.createElement(v,{dbInfo:w}),l.a.createElement(D,{getUsersInfo:function(e){r(Object(m.a)({},t,Object(s.a)({},e.target.name,e.target.value)))},onSubmitUsersData:function(e){e.preventDefault();var a=!Object.values(t).some((function(e){return""===e})),n=Object.values(R).every(Boolean);if(a&&n){var l=t.FIRST_NAME,c=t.LAST_NAME,s=t.PHONE,o=t.GENDER,u=t.AGE,E={_id:b()(),FIRST_NAME:l,LAST_NAME:c,PHONE:s,GENDER:o,AGE:u};_.userDataBase.add(E).then((function(){var e;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(_.userDataBase.toArray());case 2:e=a.sent,p(Object(m.a)({},f,{ALL_USERS:e}));case 4:case"end":return a.stop()}}))})),r(G),j(!0)}else j(!1)},userState:t,getValidationReport:function(e){R=e},isSubmit:C}),l.a.createElement(l.a.Fragment,null,g?l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement("span",null,"Database is empty...")):T.length>0?l.a.createElement(y,{userDataBase:f,deleteUser:function(e){var a;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return _.userDataBase.delete(e),t.next=3,i.a.awrap(_.userDataBase.toArray());case 3:a=t.sent,p(Object(m.a)({},f,{ALL_USERS:a}));case 5:case"end":return t.stop()}}))}}):l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement(N.a,{animation:"grow",variant:"primary"}))))};c.a.render(l.a.createElement(w,null),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.a8f37004.chunk.js.map